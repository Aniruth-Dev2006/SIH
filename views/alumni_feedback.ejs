<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback | Alumnium</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/alumni.css">
</head>
<body>
    <div class="toast-container" id="toastContainer"></div>
    <%- include('partials/header') %>

    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>
    <div class="dashboard-layout">
        <%- include('partials/alumni-sidebar', { currentPage: 'feedback', alumni: alumni }) %>

        <main class="main-content">
            <h1 class="h2 mb-4">Share Your Feedback</h1>

            <div class="row">
                <div class="col-md-8">
                    <!-- Feedback Form -->
                    <div class="content-card mb-4">
                        <h5 class="mb-3">Help Us Improve</h5>
                        <form id="feedbackForm">
                            <div class="mb-3">
                                <label class="form-label">Feedback Type</label>
                                <select class="form-select" id="feedbackType" required>
                                    <option value="">Select type...</option>
                                    <option>Portal Features</option>
                                    <option>Event Experience</option>
                                    <option>Networking Tools</option>
                                    <option>Mentorship Program</option>
                                    <option>Donation Process</option>
                                    <option>General Suggestion</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Subject</label>
                                <input type="text" class="form-control" id="feedbackSubject" placeholder="Brief summary" required>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Detailed Feedback</label>
                                <textarea class="form-control" id="feedbackMessage" rows="6" placeholder="Share your thoughts in detail..." required></textarea>
                                <small class="text-muted-foreground">Minimum 50 characters</small>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Rate Your Overall Experience</label>
                                <div class="rating-stars fs-4" id="overallRating">
                                    <i class="bi bi-star" data-rating="1" style="cursor: pointer;"></i>
                                    <i class="bi bi-star" data-rating="2" style="cursor: pointer;"></i>
                                    <i class="bi bi-star" data-rating="3" style="cursor: pointer;"></i>
                                    <i class="bi bi-star" data-rating="4" style="cursor: pointer;"></i>
                                    <i class="bi bi-star" data-rating="5" style="cursor: pointer;"></i>
                                </div>
                            </div>

                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="allowContact" checked>
                                    <label class="form-check-label" for="allowContact">
                                        Allow admin to contact me for clarification
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-send me-2"></i>Submit Feedback
                            </button>
                        </form>
                    </div>
                </div>

                <div class="col-md-4">
                    <!-- Quick Stats -->
                    <div class="content-card mb-3">
                        <h6 class="mb-3">Your Contributions</h6>
                        <div class="mb-2">
                            <small class="text-muted-foreground">Total Feedback</small>
                            <h4 class="mb-0">5</h4>
                        </div>
                        <hr>
                        <div class="mb-2">
                            <small class="text-muted-foreground">Pending Review</small>
                            <h4 class="mb-0 text-warning">1</h4>
                        </div>
                        <hr>
                        <div class="mb-0">
                            <small class="text-muted-foreground">Implemented</small>
                            <h4 class="mb-0 text-success">3</h4>
                        </div>
                    </div>

                    <!-- Impact Alert -->
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle-fill me-2"></i>
                        <strong>Your Voice Matters!</strong>
                        <p class="mb-0 small">We've implemented 3 of your suggestions. Thank you for making Alumnium better!</p>
                    </div>

                    <!-- Quick Tips -->
                    <div class="content-card">
                        <h6 class="mb-3">Feedback Tips</h6>
                        <ul class="small">
                            <li class="mb-2">Be specific about issues</li>
                            <li class="mb-2">Suggest actionable improvements</li>
                            <li class="mb-2">Share your experience</li>
                            <li class="mb-0">We respond within 48 hours</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- My Previous Feedback -->
            <div class="content-card">
                <h5 class="mb-3">My Feedback History</h5>
                <div class="accordion" id="feedbackAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#feedback1">
                                <div class="w-100 pe-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="fw-medium">Job Portal Enhancement</span>
                                        <span class="badge bg-success">Implemented</span>
                                    </div>
                                    <small class="text-muted-foreground">Portal Features • Aug 15, 2025</small>
                                </div>
                            </button>
                        </h2>
                        <div id="feedback1" class="accordion-collapse collapse show" data-bs-parent="#feedbackAccordion">
                            <div class="accordion-body">
                                <p class="mb-2"><strong>Your Feedback:</strong></p>
                                <p class="text-muted-foreground mb-3">Add ability to post jobs with company logo and detailed job descriptions.</p>
                                <div class="alert alert-success mb-0">
                                    <strong>Admin Response:</strong> Great suggestion! We've implemented this feature. Alumni can now post jobs with company logos and rich text descriptions.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feedback2">
                                <div class="w-100 pe-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="fw-medium">Event Notifications</span>
                                        <span class="badge bg-warning">Under Review</span>
                                    </div>
                                    <small class="text-muted-foreground">Event Experience • Sep 10, 2025</small>
                                </div>
                            </button>
                        </h2>
                        <div id="feedback2" class="accordion-collapse collapse" data-bs-parent="#feedbackAccordion">
                            <div class="accordion-body">
                                <p class="mb-2"><strong>Your Feedback:</strong></p>
                                <p class="text-muted-foreground mb-0">Would be great to have email reminders 24 hours before an event. Currently only getting reminders 1 hour before.</p>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feedback3">
                                <div class="w-100 pe-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="fw-medium">Mentorship Matching Algorithm</span>
                                        <span class="badge bg-success">Implemented</span>
                                    </div>
                                    <small class="text-muted-foreground">Mentorship Program • Jul 22, 2025</small>
                                </div>
                            </button>
                        </h2>
                        <div id="feedback3" class="accordion-collapse collapse" data-bs-parent="#feedbackAccordion">
                            <div class="accordion-body">
                                <p class="mb-2"><strong>Your Feedback:</strong></p>
                                <p class="text-muted-foreground mb-3">Implement smart matching based on skills and interests rather than random assignment.</p>
                                <div class="alert alert-success mb-0">
                                    <strong>Admin Response:</strong> Excellent idea! We've implemented an AI-powered matching system that considers skills, interests, and career goals.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <%- include('partials/footer') %>
    <script>
        // Star rating functionality
        const ratingStars = document.querySelectorAll('#overallRating i');
        let selectedRating = 0;

        ratingStars.forEach((star, index) => {
            star.addEventListener('click', () => {
                selectedRating = star.getAttribute('data-rating');
                updateStars(selectedRating);
                AlumniumUtils.showToast(`Rated ${selectedRating} stars`, 'info');
            });

            star.addEventListener('mouseenter', () => {
                const rating = star.getAttribute('data-rating');
                updateStars(rating);
            });
        });

        document.getElementById('overallRating').addEventListener('mouseleave', () => {
            updateStars(selectedRating);
        });

        function updateStars(rating) {
            ratingStars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('bi-star');
                    star.classList.add('bi-star-fill', 'text-warning');
                } else {
                    star.classList.remove('bi-star-fill', 'text-warning');
                    star.classList.add('bi-star');
                }
            });
        }

        document.getElementById('feedbackForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const message = document.getElementById('feedbackMessage').value;
            if (message.length < 50) {
                AlumniumUtils.showToast('Please provide at least 50 characters of feedback', 'error');
                return;
            }

            if (selectedRating === 0) {
                AlumniumUtils.showToast('Please rate your overall experience', 'error');
                return;
            }

            AlumniumUtils.showToast('Submitting your feedback...', 'info');
            
            setTimeout(() => {
                AlumniumUtils.showToast('Thank you! Your feedback has been submitted successfully.', 'success');
                document.getElementById('feedbackForm').reset();
                selectedRating = 0;
                updateStars(0);
            }, 1500);
        });
    </script>
</body>
</html>
